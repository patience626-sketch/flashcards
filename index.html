<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å–®å­—æ¸¬é©—ç¶²ç«™æ¨¡æ¿</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .card { width: 280px; border: 1px solid #ccc; padding: 16px; border-radius: 12px; }
    img { width: 100%; border-radius: 8px; }
    button { margin: 6px 0; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
    .options button { display:block; width:100%; }
  </style>
</head>
<body>

<h1>å–®å­—æ¸¬é©—æ¨¡æ¿</h1>

<div>
  <h2>æ–°å¢å–®å­—</h2>
  <input id="wordCn" placeholder="ä¸­æ–‡" />
  <input id="wordEn" placeholder="è‹±æ–‡" />
  <input id="wordImg" placeholder="åœ–ç‰‡ URL" />
  <button onclick="addWord()">æ–°å¢å–®å­—</button>
</div>

<hr />

<div id="quiz-area" class="card" style="display:none;"></div>
<button id="startBtn" onclick="startQuiz()">é–‹å§‹æ¸¬é©—</button>

<script>
  let words = [];
  let current = null;

  function addWord() {
    const cn = document.getElementById('wordCn').value;
    const en = document.getElementById('wordEn').value;
    const img = document.getElementById('wordImg').value;
    if (!cn || !en) return alert('è«‹è¼¸å…¥å®Œæ•´è³‡æ–™');
    words.push({ cn, en, img });
    alert('æ–°å¢æˆåŠŸ');
  }

  function startQuiz() {
    if (words.length < 4) return alert('è‡³å°‘éœ€è¦ 4 å€‹å–®å­—');
    renderQuiz();
  }

  function renderQuiz() {
    current = words[Math.floor(Math.random() * words.length)];
    const choices = shuffle([...words])
      .slice(0,3);
    if (!choices.includes(current)) choices[Math.floor(Math.random()*3)] = current;

    const quiz = document.getElementById('quiz-area');
    quiz.style.display = 'block';
    quiz.innerHTML = `
      <img src="${current.img || ''}" alt="image" />
      <h3>${current.cn}</h3>
      <button onclick="playAudio()">ğŸ”Š æ’­æ”¾ç™¼éŸ³</button>
      <div class="options">
        ${choices.map(c => `<button onclick=\"check('${c.en}')\">${c.en}</button>`).join('')}
      </div>
    `;
    window.speech = new SpeechSynthesisUtterance(current.en);
  }

  function check(ans) {
    if (ans === current.en) alert('ç­”å°äº†ï¼');
    else alert('ç­”éŒ¯äº†ï¼Œå†åŠ æ²¹ï¼');
    renderQuiz();
  }

  function playAudio() {
    speechSynthesis.speak(window.speech);
  }

  function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }
</script>
</body>
</html>
